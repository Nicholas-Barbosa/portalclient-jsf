<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:composite="http://java.sun.com/jsf/composite"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	xmlns:c="http://java.sun.com/jsf/composite/components/customer">
<h:head>
	<h:outputStylesheet name="css/#{userStylePreferences.layout}.css"
		library="rain-layout" />
	<h:outputStylesheet name="css/primeflex.min.css" library="rain-layout" />
</h:head>

<composite:interface>
	<composite:attribute name="customer" required="true" />

</composite:interface>

<composite:implementation>
	<div jsf:id="#{cc.clientId}">
		<h:form>
			<p:remoteCommand name="findPayments"
				action="#{openPaymentsComponentController.findPayments(1,cc.attrs.customer.code,cc.attrs.customer.store)}"
				autoRun="true" update="dtBonds" onstart="showSkeleton()"
				oncomplete="hideSkeleton();" />

			<div id="content" style="display: none">
				<p:dataTable id="dtPayments" var="payment"
					value="#{customerDetailController.titles}" paginator="true"
					rows="10" paginatorPosition="bottom" lazy="true">
					<p:ajax event="page"
						listener="#{customerDetailController.onBondsPage}" />
					<p:column
						headerText="#{resourceBundleServiceImpl.getMessage('numero_documento')}">
						<h:outputText value="#{title.docNumber}" />
					</p:column>
					<p:column
						headerText="#{resourceBundleServiceImpl.getMessage('cliente')}">

						<h:outputText value="#{title.customerName}" />
					</p:column>
					<p:column
						headerText="#{resourceBundleServiceImpl.getMessage('venda')}">
						<h:outputText value="#{title.sale}">
							<f:convertNumber locale="pt_BR" currencySymbol="R$"
								type="currency" />
						</h:outputText>
					</p:column>
					<p:column
						headerText="#{resourceBundleServiceImpl.getMessage('data_vencimento')}">
						<h:outputText value="#{title.dueDate}">
							<f:convertDateTime pattern="dd/MM/yyyy 'Ã s' HH:mm:ss"
								type="localDateTime" />
						</h:outputText>
					</p:column>
					<p:column
						headerText="#{resourceBundleServiceImpl.getMessage('situacao')}">
						<h:outputText value="#{title.situation}" />
					</p:column>
				</p:dataTable>
			</div>

			<div id="divLoading" style="display: none">
				<h5>Loading...</h5>
				<p:dataTable var="product"
					value="#{dataTableSkeletonObjects.getSkeleton(10)}">
					<p:column
						headerText="#{resourceBundleServiceImpl.getMessage('numero_documento')}">
						<p:skeleton />
					</p:column>
					<p:column
						headerText="#{resourceBundleServiceImpl.getMessage('cliente')}">
						<p:skeleton />
					</p:column>
					<p:column
						headerText="#{resourceBundleServiceImpl.getMessage('venda')}">
						<p:skeleton />
					</p:column>
					<p:column
						headerText="#{resourceBundleServiceImpl.getMessage('data_vencimento')}">
						<p:skeleton />
					</p:column>
					<p:column
						headerText="#{resourceBundleServiceImpl.getMessage('situacao')}">
						<p:skeleton />
					</p:column>
				</p:dataTable>

			</div>
		</h:form>
	</div>
</composite:implementation>

</html>
