<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" lang="en">

<h:head>
	<f:facet name="first">
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="viewport"
			content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<link rel="icon"
			href="#{request.contextPath}/resources/rain-layout/images/favicon.ico"
			type="image/x-icon"></link>
	</f:facet>
	<title>#{resourceBundleServiceImpl.getMessage('cliente_detalhes')}</title>

	<style>
/* reset on the showcase style*/
body .ui-panelgrid .ui-panelgrid-cell {
	background-color: transparent;
}

/* example use of styles for your form */
.my-heading-row {
	background-color: var(- -surface-c);
	font-weight: bold;
}
</style>

</h:head>

<h:body styleClass="#{userStylePreferences.inputStyleClass}">

	<p:growl globalOnly="true" id="growl" showDetail="true" />
	<div class="card">
		<p:tabView dynamic="true" cache="true">
			<p:tab title="#{resourceBundleServiceImpl.getMessage('cliente')}"
				effect="fade" effectDuration="fast">
				<p:panelGrid columns="4"
					columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
					layout="grid" styleClass="ui-panelgrid-blank ui-fluid"
					style="border:0px none; background-color:transparent;">

					<p:outputLabel for="@next"
						value="#{resourceBundleServiceImpl.getMessage('nome')}" />
					<p:inputText value="#{customerDetailController.customer.name}"
						readonly="true" />

					<p:outputLabel for="@next"
						value="#{resourceBundleServiceImpl.getMessage('nome_fantasia')}" />
					<p:inputText
						value="#{customerDetailController.customer.fantasyName}"
						readonly="true" />

					<p:outputLabel for="@next" value="CNPJ" />
					<p:inputText value="#{customerDetailController.customer.cnpj}"
						readonly="true" />

					<p:outputLabel for="@next"
						value="#{resourceBundleServiceImpl.getMessage('codigo')}" />
					<p:inputText value="#{customerDetailController.customer.code}"
						readonly="true" />

					<p:outputLabel for="@next" value="Email" />
					<p:inputText value="#{customerDetailController.customer.email}"
						readonly="true" />

					<p:outputLabel for="@next" value="Email2" />
					<p:inputText value="#{customerDetailController.customer.email2}"
						readonly="true" />

					<p:outputLabel for="@next"
						value="#{resourceBundleServiceImpl.getMessage('bloqueado')}" />
					<p:inputText value="#{customerDetailController.customer.blocked}"
						readonly="true" />

				</p:panelGrid>
			</p:tab>
			<p:tab title="#{resourceBundleServiceImpl.getMessage('financeiro')}">

				<p:panelGrid columns="4"
					columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
					layout="grid" styleClass="ui-panelgrid-blank ui-fluid"
					style="border:0px none; background-color:transparent;">

					<p:outputLabel for="@next"
						value="#{resourceBundleServiceImpl.getMessage('limite')}" />
					<p:inputText value="#{customerDetailController.customer.limit}"
						readonly="true">
						<f:convertNumber currencySymbol="R$" locale="pt_BR"
							type="currency" />
					</p:inputText>

					<p:outputLabel for="@next"
						value="#{resourceBundleServiceImpl.getMessage('risco')}" />
					<p:inputText value="#{customerDetailController.customer.risk}"
						readonly="true" />

					<p:outputLabel for="@next"
						value="#{resourceBundleServiceImpl.getMessage('ultima_compra')}" />
					<p:inputText
						value="#{customerDetailController.customer.lastPurchase}"
						readonly="true">
						<f:convertDateTime locale="pt_BR" type="localDateTime" />
					</p:inputText>
					<p:outputLabel for="@next"
						value="#{resourceBundleServiceImpl.getMessage('condicao_pagamento')}" />
					<p:inputText
						value="#{customerDetailController.customer.paymentTerms}"
						readonly="true" />

					<p:outputLabel for="@next"
						value="#{resourceBundleServiceImpl.getMessage('tabela')}" />
					<p:inputText value="#{customerDetailController.customer.table}"
						readonly="true" />

					<p:outputLabel for="@next"
						value="#{resourceBundleServiceImpl.getMessage('desconto')}" />
					<p:inputText value="#{customerDetailController.customer.discount}"
						readonly="true" />

					<p:outputLabel for="@next"
						value="#{resourceBundleServiceImpl.getMessage('desconto')}2" />
					<p:inputText value="#{customerDetailController.customer.discount2}"
						readonly="true" />

					<p:outputLabel for="@next"
						value="#{resourceBundleServiceImpl.getMessage('desconto')}3" />
					<p:inputText value="#{customerDetailController.customer.discount3}"
						readonly="true" />
				</p:panelGrid>

			</p:tab>
			<p:tab
				title="#{resourceBundleServiceImpl.getMessage('geolocalizacao')}">
				<h:form>
					<p:panelGrid columns="4"
						columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
						layout="grid" styleClass="ui-panelgrid-blank ui-fluid"
						style="border:0px none; background-color:transparent;">

						<p:outputLabel for="@next" value="CEP" />
						<p:inputText value="#{customerDetailController.customer.zipCode}"
							readonly="true" />

						<p:outputLabel for="@next"
							value="#{resourceBundleServiceImpl.getMessage('endereco')}" />
						<p:inputText value="#{customerDetailController.customer.street}"
							readonly="true" />

						<p:outputLabel for="@next"
							value="#{resourceBundleServiceImpl.getMessage('bairro')}" />
						<p:inputText value="#{customerDetailController.customer.district}"
							readonly="true" />

						<p:outputLabel for="@next"
							value="#{resourceBundleServiceImpl.getMessage('cidade')}" />
						<p:inputText
							value="#{customerDetailController.customer.city}, #{customerDetailController.customer.state}"
							readonly="true" />
						<p:row styleClass="my-heading-row" style="font-weight: bold">
								Maps #{customerDetailController.currentLatLng}
								</p:row>
						<p:gmap center="#{customerDetailController.currentLatLng}"
							zoom="15" type="roadmap" style="width:93.5vw;height:80vh"
							model="#{customerDetailController.gMap}" id="map" />
					</p:panelGrid>
					<p:remoteCommand name="loadMap"
						action="#{customerDetailController.loadGMap}" process="@this"
						update="map" autoRun="true" />
				</h:form>
			</p:tab>
			<p:tab
				title="#{resourceBundleServiceImpl.getMessage('titulos_em_aberto')}">
				<h:form>
					<p:remoteCommand name="loadTitles"
						action="#{customerDetailController.loadFinancialBonds(1)}"
						autoRun="true" update="dtBonds" onstart="showSkeleton()"
						oncomplete="hideSkeleton();" />

					<div id="dtBonds" style="display: none">
						<p:dataTable id="dtBonds" var="title"
							value="#{customerDetailController.titles}" paginator="true"
							rows="10" paginatorPosition="bottom" lazy="true">
							<p:ajax event="page"
								listener="#{customerDetailController.onBondsPage}" />
							<p:column
								headerText="#{resourceBundleServiceImpl.getMessage('numero_documento')}">
								<h:outputText value="#{title.docNumber}" />
							</p:column>
							<p:column
								headerText="#{resourceBundleServiceImpl.getMessage('cliente')}">

								<h:outputText value="#{title.customerName}" />
							</p:column>
							<p:column
								headerText="#{resourceBundleServiceImpl.getMessage('venda')}">
								<h:outputText value="#{title.sale}">
									<f:convertNumber locale="pt_BR" currencySymbol="R$"
										type="currency" />
								</h:outputText>
							</p:column>
							<p:column
								headerText="#{resourceBundleServiceImpl.getMessage('data_vencimento')}">
								<h:outputText value="#{title.dueDate}">
									<f:convertDateTime pattern="dd/MM/yyyy 'às' HH:mm:ss"
										type="localDateTime" />
								</h:outputText>
							</p:column>
							<p:column
								headerText="#{resourceBundleServiceImpl.getMessage('situacao')}">
								<h:outputText value="#{title.situation}" />
							</p:column>
						</p:dataTable>
					</div>

					<div id="divLoading" style="display: none">
						<h5>Loading...</h5>
						<p:dataTable var="product"
							value="#{dataTableSkeletonObjects.getSkeleton(10)}">
							<p:column
								headerText="#{resourceBundleServiceImpl.getMessage('numero_documento')}">
								<p:skeleton />
							</p:column>
							<p:column
								headerText="#{resourceBundleServiceImpl.getMessage('cliente')}">
								<p:skeleton />
							</p:column>
							<p:column
								headerText="#{resourceBundleServiceImpl.getMessage('venda')}">
								<p:skeleton />
							</p:column>
							<p:column
								headerText="#{resourceBundleServiceImpl.getMessage('data_vencimento')}">
								<p:skeleton />
							</p:column>
							<p:column
								headerText="#{resourceBundleServiceImpl.getMessage('situacao')}">
								<p:skeleton />
							</p:column>
						</p:dataTable>

					</div>
				</h:form>
			</p:tab>
			<p:tab title="Tabelas">
				<div id="content">
					<h:form>
						<p:remoteCommand autoRun="true"
							action="#{customerDetailController.loadProductsPriceList}"
							process="@this"
							onstart="$('#divLoading').show();$('#content').hide()"
							oncomplete="$('#divLoading').hide();" update="dtList" />
						<p:dataTable value="#{customerDetailController.productsPriceList}"
							var="list" rows="5" paginator="true" id="dtList">
							<p:column groupRow="true">
								<h:outputText style="vertical-align: middle; margin-left: .5rem"
									value="#{list.code}" />
							</p:column>
							<p:column field="product.commercialCode" headerText="Código" />
							<p:column field="product.description" headerText="Produto" />
							<p:column field="product.line" headerText="Linha" />
							<p:column headerText="Valor" filterable="false">
								<h:outputText value="#{list.product.value.unitValue}">
									<f:convertNumber currencySymbol="R$" type="currency"
										locale="pt_BR" />
								</h:outputText>
							</p:column>
							<p:column headerText="ST" filterable="false">
								<h:outputText value="#{list.product.value.unitStValue}">
									<f:convertNumber currencySymbol="R$" type="currency"
										locale="pt_BR" />
								</h:outputText>
							</p:column>
							<p:column headerText="Bruto"
								filterable="false">
								<h:outputText value="#{list.product.value.unitGrossValue}">
									<f:convertNumber currencySymbol="R$" type="currency"
										locale="pt_BR" />
								</h:outputText>
							</p:column>
						</p:dataTable>
					</h:form>
				</div>
				<div id="notFound" class="exception-body notfound"
					style="display: none">
					<div class="exception-card">
						<h1>
							<span>NENHUM</span> REGISTRO ENCONTRADO
						</h1>
						<p:graphicImage name="images/pages/asset-404.svg"
							library="rain-layout" />
						<span>Tente novamente com outra palavra-chave</span>
					</div>
				</div>

				<div id="divLoading" style="display: none">
					<h5>Loading...</h5>
					<p:dataTable var="product"
						value="#{dataTableSkeletonObjects.getSkeleton(10)}">
						<p:column headerText="Código">
							<p:skeleton />
						</p:column>
						<p:column headerText="Valor unitário">
							<p:skeleton />
						</p:column>
						<p:column headerText="ST">
							<p:skeleton />
						</p:column>

					</p:dataTable>

				</div>
			</p:tab>
		</p:tabView>

	</div>

	<h:outputStylesheet name="css/#{userStylePreferences.layout}.css"
		library="rain-layout" />


	<script type="text/javascript"
		src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD3OLz2OAPNufe4j9t5vF6AS879LDUzAvw"
		async="async" defer="defer"></script>

	<script>
		function showSkeleton() {
			$('#divLoading').show();
			$('dtBonds').hide();
		}
		function hideSkeleton() {
			$('#divLoading').hide();
			$('dtBonds').show();
		}
	</script>
</h:body>

</html>

